#!/bin/bash
function organizar_fotos_definitivo() {
    local TARGET_DIR="$1"
    if [ -z "$TARGET_DIR" ]; then echo "âŒ Faltan argumentos"; return 1; fi
    if ! command -v exiftool &> /dev/null; then echo "âŒ Instala exiftool"; return 1; fi

    echo "ğŸš€ Procesando: $TARGET_DIR"
    echo "ğŸš¨ MODO REAL: Se moverÃ¡n archivos."
    echo ""
    find "$TARGET_DIR" -mindepth 1 -maxdepth 1 -type d | while read location_path; do
        LOCATION_NAME=$(basename "$location_path")
        echo "ğŸ“ LocalizaciÃ³n: $LOCATION_NAME"
        cd "$location_path" || continue
        exiftool -r -d "%Y-%m-%d" '-Directory<DateTimeOriginal' -ext jpg -ext ARW -ext CR3 -ext NEF -ext DNG -q -q .
        find . -type d -empty -delete
        cd - > /dev/null
        echo "   âœ… Hecho."
    done
    echo "ğŸ Fin."
}
organizar_fotos_definitivo "$@"
